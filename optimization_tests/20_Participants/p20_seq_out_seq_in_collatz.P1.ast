foreign gettimeofday : (unit) -> (unit) := "@Unix:gettimeofday";
foreign print_float : (unit) -> (unit) := "@Stdlib:print_float";
foreign sub_float : (unit) -> ((unit) -> (unit)) := "@Stdlib:(-.)";
test_collatz
  inp := if ret inp = 1 then ret 0 else let res1 := ret inp / 2; in let 
                                                                    res2 := 
                                                                    ret 
                                                                    res1 *
                                                                    2; in 
                                                                    if 
                                                                    ret 
                                                                    res2 =
                                                                    inp then 
                                                                    let 
                                                                    part_res := 
                                                                    ret 
                                                                    test_collatz 
                                                                    ret 
                                                                    res1; in 
                                                                    ret 
                                                                    part_res +
                                                                    1 else 
                                                                    let 
                                                                    res3 := 
                                                                    ret 
                                                                    3 * inp +
                                                                    1; in 
                                                                    let 
                                                                    res4 := 
                                                                    ret 
                                                                    test_collatz 
                                                                    ret 
                                                                    res3; in 
                                                                    ret 
                                                                    1 +
                                                                    res4;
_ := unit;
_ := unit;
_ := unit;
_ := unit;
_ := unit;
_ := unit;
_ := unit;
_ := unit;
_ := unit;
_ := unit;
_ := unit;
_ := unit;
_ := unit;
_ := unit;
_ := unit;
_ := unit;
_ := unit;
_ := unit;
_ := unit;
loop
  iter := if ret iter > 0 then choose L for P2 in choose L for P3 in 
                                                  choose L for P4 in 
                                                  choose L for P5 in 
                                                  choose L for P6 in 
                                                  choose L for P7 in 
                                                  choose L for P8 in 
                                                  choose L for P9 in 
                                                  choose L for P10 in 
                                                  choose L for P11 in 
                                                  choose L for P12 in 
                                                  choose L for P13 in 
                                                  choose L for P14 in 
                                                  choose L for P15 in 
                                                  choose L for P16 in 
                                                  choose L for P17 in 
                                                  choose L for P18 in 
                                                  choose L for P19 in 
                                                  choose L for P20 in 
                                                  let reply_P2 := <~ P2; in 
                                                    let reply_P3 := <~ P3; in 
                                                      let reply_P4 := <~ P4; in 
                                                        let reply_P5 := 
                                                              <~ P5; in 
                                                          let reply_P6 := 
                                                                <~ P6; in 
                                                            let reply_P7 := 
                                                                  <~ P7; in 
                                                              let reply_P8 := 
                                                                    <~ P8; in 
                                                                let reply_P9 := 
                                                                    <~ P9; in 
                                                                  let 
                                                                    reply_P10 := 
                                                                    <~ P10; in 
                                                                    let 
                                                                    reply_P11 := 
                                                                    <~ P11; in 
                                                                    let 
                                                                    reply_P12 := 
                                                                    <~ P12; in 
                                                                    let 
                                                                    reply_P13 := 
                                                                    <~ P13; in 
                                                                    let 
                                                                    reply_P14 := 
                                                                    <~ P14; in 
                                                                    let 
                                                                    reply_P15 := 
                                                                    <~ P15; in 
                                                                    let 
                                                                    reply_P16 := 
                                                                    <~ P16; in 
                                                                    let 
                                                                    reply_P17 := 
                                                                    <~ P17; in 
                                                                    let 
                                                                    reply_P18 := 
                                                                    <~ P18; in 
                                                                    let 
                                                                    reply_P19 := 
                                                                    <~ P19; in 
                                                                    let 
                                                                    reply_P20 := 
                                                                    <~ P20; in 
                                                                    loop 
                                                                    ret 
                                                                    iter -
                                                                    1 else 
          choose R for P2 in choose R for P3 in choose R for P4 in choose R for P5 in 
                                                                   choose R for P6 in 
                                                                   choose R for P7 in 
                                                                   choose R for P8 in 
                                                                   choose R for P9 in 
                                                                   choose R for P10 in 
                                                                   choose R for P11 in 
                                                                   choose R for P12 in 
                                                                   choose R for P13 in 
                                                                   choose R for P14 in 
                                                                   choose R for P15 in 
                                                                   choose R for P16 in 
                                                                   choose R for P17 in 
                                                                   choose R for P18 in 
                                                                   choose R for P19 in 
                                                                   choose R for P20 in 
                                                                   ret 
                                                                    ();
main := let start_time := ret gettimeofday ret (); in let _ := loop ret 100; in 
                                                        let end_time := 
                                                              ret gettimeofday 
                                                              ret (); in 
                                                          let time_diff := 
                                                                ret sub_float 
                                                                ret end_time 
                                                                ret start_time; in 
                                                            ret print_float 
                                                            ret time_diff;
